@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

@layer base {
  html {
    /* Prevent horizontal scrolling */
    overflow-x: hidden;
    /* Smooth scrolling */
    scroll-behavior: smooth;
    /* Ensure page background is white (prevents blue peek on overscroll) */
    background-color: #ffffff;
  }
  
  body {
    font-family: 'Inter', system-ui, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* Prevent horizontal scrolling */
    overflow-x: hidden;
    /* Match body background to white */
    background-color: #ffffff;
    /* Respect iOS safe area to avoid content under status bar */
    padding-top: constant(safe-area-inset-top);
    padding-top: env(safe-area-inset-top);
    /* Prevent zoom on input focus (iOS) */
    -webkit-text-size-adjust: 100%;
    /* Prevent touch callouts */
    -webkit-touch-callout: none;
    /* Prevent text selection on UI elements */
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  
  /* Allow text selection in content areas */
  input, textarea, [contenteditable] {
    -webkit-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;
  }
  
  /* Fix viewport issues on mobile */
  #root {
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
  }

  /* Utility: safe-area top padding */
  .pt-safe-top {
    /* Ensure at least 24px plus safe-area inset */
    padding-top: calc(env(safe-area-inset-top, 0px) + 24px);
    padding-top: calc(constant(safe-area-inset-top, 0px) + 24px);
  }
  
  /* Prevent horizontal scroll on all containers */
  * {
    box-sizing: border-box;
  }
  
  /* Mobile-specific fixes */
  @media (max-width: 768px) {
    body {
      /* Prevent bounce scrolling on iOS */
      -webkit-overflow-scrolling: touch;
      /* Fix for iOS Safari bottom bar */
      min-height: -webkit-fill-available;
    }
    
    /* Ensure containers don't overflow */
    .container, .max-w-7xl, .max-w-6xl, .max-w-4xl, .max-w-2xl {
      max-width: 100vw;
      padding-left: 1rem;
      padding-right: 1rem;
    }
  }
}

@layer components {
  .btn-primary {
    @apply bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200;
  }
  
  .btn-secondary {
    @apply bg-gray-100 hover:bg-gray-200 text-gray-900 px-4 py-2 rounded-lg font-medium transition-colors duration-200;
  }
  
  .btn-success {
    @apply bg-success-600 hover:bg-success-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200;
  }
  
  .btn-danger {
    @apply bg-danger-600 hover:bg-danger-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200;
  }
  
  .card {
    @apply bg-white rounded-lg shadow-sm border border-gray-200 p-6;
  }
  
  .input-field {
    @apply w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent;
  }
  
  .status-badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }
  
  .status-pending {
    @apply bg-warning-100 text-warning-800;
  }
  
  .status-approved {
    @apply bg-success-100 text-success-800;
  }
  
  .status-in-progress {
    @apply bg-primary-100 text-primary-800;
  }
  
  .status-rejected {
    @apply bg-danger-100 text-danger-800;
  }
  
  .status-cancelled {
    @apply bg-gray-100 text-gray-800;
  }
  
  /* Mobile Modal Fixes */
  .modal-overlay {
    @apply fixed inset-0 bg-gray-600 bg-opacity-50 z-50;
    /* Prevent scrolling behind modal */
    overflow: hidden;
    /* Fix iOS modal positioning */
    -webkit-overflow-scrolling: touch;
  }
  
  .modal-container {
    @apply relative w-full h-full flex items-center justify-center p-4;
    /* Prevent horizontal scroll in modal */
    overflow-x: hidden;
    overflow-y: auto;
  }
  
  .modal-content {
    @apply bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh];
    /* Ensure modal content scrolls properly */
    overflow-y: auto;
    /* Prevent modal from being too wide */
    max-width: calc(100vw - 2rem);
  }
  
  /* Mobile-specific modal adjustments */
  @media (max-width: 768px) {
    .modal-container {
      @apply items-end sm:items-center;
      padding-bottom: env(safe-area-inset-bottom, 0);
    }
    
    .modal-content {
      @apply rounded-t-2xl sm:rounded-2xl;
      max-height: 85vh;
      /* Fix for iOS keyboard */
      margin-bottom: env(safe-area-inset-bottom, 0);
    }
    
    /* Stack buttons vertically on mobile */
    .mobile-button-stack {
      @apply flex-col space-y-3 space-x-0;
    }
    
    .mobile-button-stack > * {
      @apply w-full;
    }
  }
  
  /* Touch-friendly button sizing */
  @media (max-width: 768px) {
    .btn-primary, .btn-secondary, .btn-success, .btn-danger {
      @apply px-6 py-3 text-base;
      min-height: 44px; /* iOS recommended touch target */
    }
    
    /* Ensure buttons don't break layout */
    button {
      word-wrap: break-word;
      overflow-wrap: break-word;
    }
  }
}
